#!/usr/bin/env bash

#
# Bootstrapping
#

# fresh: bundler for dotfiles
fresh freshshell/fresh bin/fresh --bin

# bootstrap: bootstrap my complete dev environment
fresh scripts/bootstrap --bin

#
# System
#

# systemd: system daemon
fresh scripts/systemd-toggle --bin
for unit in ~/.dotfiles/config/systemd/*.{service,socket,target}; do
    unit=$(basename "$unit")
    fresh "config/systemd/$unit" --file="systemd/$unit"
done

#
# Shell
#

# dircolors: colorized ls
fresh seebi/dircolors-solarized dircolors.ansi-dark --file=~/.dircolors

# fish: the friendly interactive shell, for humans
fresh config/fish/init.fish --file=~/.config/fish/conf.d/00-init.fish
fresh config/fish/colors.fish --file=~/.config/fish/conf.d/01-colors.fish
fresh config/fish/appearance.fish --file=~/.config/fish/conf.d/02-appearance.fish
fresh config/fish/config.fish --file=~/.config/fish/config.fish
for function in ~/.dotfiles/config/fish/functions/*.fish; do
    function=$(basename "$function")
    fresh "config/fish/functions/$function" --file="~/.config/fish/functions/$function"
done
for completion in ~/.dotfiles/config/fish/completions/*.fish; do
    completion=$(basename "$completion")
    fresh "config/fish/completions/$completion" --file="~/.config/fish/completions/$completion"
done
fresh edc/bass functions/bass.fish --file=~/.config/fish/vendor/functions/bass.fish
fresh edc/bass functions/__bass.py --file=~/.config/fish/vendor/functions/__bass.py

# neofetch: screenfetch replacement
fresh config/neofetch --file=~/.config/neofetch/config

#
# Editing
#

# neovim: vim improved
fresh scripts/vimprofile --bin
for config in ~/.dotfiles/config/nvim/*.vim; do
    config=$(basename "$config")
    fresh "config/nvim/$config" --file="~/.config/nvim/$config"
done

# nyaovim: electron gui for neovim
fresh config/nyaovimrc.html --file=~/.config/nyaovim/nyaovimrc.html

# oni: neovim-based ide
fresh config/oni/config.js --file=~/.oni/config.js

#
# Compilers
#

# clang: llvm c front-end
fresh scripts/clang-flags-native --bin

# gcc: gnu compiler collection
fresh scripts/gcc-flags-native --bin

# gdb: gnu debugger
fresh config/gdbinit --file=~/.gdbinit.d/config

#
# Graphical
#

# alacritty: a fast terminal emulator
fresh config/alacritty.yml --file=~/.config/alacritty/alacritty.yml

# compton: x compositor
fresh config/compton.conf --file=~/.config/compton.conf

# dunst: lightweight notification agent
fresh config/dunstrc --file=~/.config/dunst/dunstrc

# evrouter: input event daemon
fresh config/evrouterrc --file
fresh scripts/evroutercleanup --bin

# gtk: widget toolkit
fresh config/gtk/gtkrc-2.0 --file
fresh config/gtk/settings.ini --file=~/.config/gtk-3.0/settings.ini
fresh config/gtk/index.theme --file=~/.icons/default/index.theme

# i3: tiling/tabbed window manger
fresh config/i3 --file=~/.config/i3/config

# polybar: fast/easy status bar
fresh config/polybar/config --file=~/.config/polybar/config
fresh config/polybar/volume.sh --file=~/.config/polybar/volume.sh

# quickterm: a toggled scratch terminal
fresh scripts/quickterm --bin

# redshift: screen tinter
fresh config/redshift.conf --file=~/.config/redshift.conf

# rofi: dmenu-replacement/run tool/window switcher
fresh config/rofi --file=~/.config/rofi/config
fresh scripts/rofi-tab --bin

# sxhkd: global keyboard bindings
fresh config/sxhkdrc --file=~/.config/sxhkd/sxhkdrc

# termite: vte-based terminal emulator
fresh config/termite --file=~/.config/termite/config

# x11: the x display server
fresh config/x11/xprofile --file
fresh config/x11/xsession --file
fresh config/x11/xinitrc --file
fresh config/x11/xserverrc --file

#
# Audio
#

# mpd: music player daemon
fresh config/mpd.conf --file=~/.mpd/mpd.conf

# ncmpcpp: mpd client
fresh config/ncmpcpp --file=~/.ncmpcpp/config

# pulseaudio: user-space sound server
fresh config/pulse/client.conf --file=~/.config/pulse/client.conf
fresh config/pulse/daemon.conf --file=~/.config/pulse/daemon.conf
fresh config/pulse/default.pa --file=~/.config/pulse/default.pa

#
# Utilities
#

# 24bit: check a terminal for true color support
fresh scripts/24bit --bin

# asdf: universal version manager
fresh config/asdf/asdfrc --file
fresh config/asdf/default-gems --file
fresh config/asdf/default-npm-packages

# fzf: fast fuzzybinder
fresh junegunn/fzf bin/fzf-tmux --bin

# git: the stupid content tracker
fresh-options --file=~/.config/git/config --marker
    fresh config/git/config
    fresh config/git/aliases
    fresh config/git/colors
fresh-options
fresh config/git/attributes --file=~/.config/git/attributes
fresh config/git/ignore --file=~/.config/git/ignore

# gnupg: the gnu privacy guard
fresh scripts/pinentry --bin
fresh config/gnupg/gpg.conf --file=~/.gnupg/gpg.conf
fresh config/gnupg/gpg-agent.conf --filter="sed s#HOME#$HOME#" --file=~/.gnupg/gpg-agent.conf
fresh config/gnupg/dirmngr.conf --file=~/.gnupg/dirmngr.conf
fresh config/gnupg/sks-keyservers.netCA.pem --file=~/.gnupg/sks-keyservers.netCA.pem

# htop: interactive process monitor
fresh config/htoprc --file=~/.config/htop/htoprc

# lockers: screen-locking programs
fresh scripts/lockvt --bin
fresh scripts/lockx --bin

# makepkg: arch linux packager
fresh config/makepkg.conf --file

# tmux: terminal multiplexer
fresh config/tmux.conf --file
fresh scripts/tmuxrl --bin

# yankee: universal yank/paste tool
fresh scripts/yankee --bin="$FRESH_BIN_PATH/yankee-yank"
fresh scripts/yankee --bin="$FRESH_BIN_PATH/yankee-paste"

fresh_after_build () {
    chmod +x ~/.fresh/build/config-polybar-*.sh
    chmod +x ~/.fresh/build/xsession

    mkdir -p ~/.config/systemd/user
    for unit in ~/.fresh/build/systemd/*; do
        unitname=$(basename "$unit")
        ln -sf "$unit" "$HOME/.config/systemd/user/$unitname"
    done
}

# vi:ft=sh:
