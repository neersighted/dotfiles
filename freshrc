#!/usr/bin/env bash

#
# Bootstrapping
#

# fresh: bundler for dotfiles
fresh freshshell/fresh bin/fresh --bin

#
# System
#

# pam_environment: environmental variables on login
fresh config/pam_environment --file

# systemd: system daemon
for unit in ~/.dotfiles/config/systemd/*.{service,socket,target}; do
    fresh config/systemd/$(basename $unit) --file=systemd/$(basename $unit)
done

#
# Shell
#

# dircolors: colorized ls
fresh seebi/dircolors-solarized dircolors.ansi-dark --file=~/.dircolorsrc

# fish: the friendly interactive shell, for humans
fresh-options --file=~/.config/fish/config.fish --marker
    fresh config/fish/config.fish
    fresh config/fish/aliases.fish
    fresh config/fish/colors.fish
fresh-options
for function in ~/.dotfiles/config/fish/functions/*.fish; do
    fresh config/fish/functions/$(basename $function) --file=~/.config/fish/functions/$(basename $function)
done
fresh oh-my-fish/plugin-foreign-env functions --file=vendor/fenv/

# fundle: package manager for fish
fresh neersighted/fundle functions/fundle.fish --file=~/.config/fish/functions/fundle.fish
fresh neersighted/fundle completions/fundle.fish --file=~/.config/fish/completions/fundle.fish

# fzf: universal fuzzy finder
fresh scripts/fzfurl --bin

#
# Editing
#

# neovim: vim improved
fresh scripts/vimprofile --bin
for config in ~/.dotfiles/config/nvim/*.vim; do
    fresh config/nvim/$(basename $config) --file=~/.config/nvim/$(basename $config)
done
fresh k-takata/minpac . --file=~/.config/nvim/pack/minpac/opt/minpac/

# nyaovim: electron gui for neovim
fresh config/nyaovimrc.html --file=~/.config/nyaovim/nyaovimrc.html

#
# Compilers
#

# clang: llvm c front-end
fresh scripts/clang-flags-native --bin

# gcc: gnu compiler collection
fresh scripts/gcc-flags-native --bin

#
# Graphical
#

# alacritty: a fast terminal emulator
fresh config/alacritty.yml --file=~/.config/alacritty/alacritty.yml

# compton: x compositor
fresh config/compton.conf --file=~/.config/compton.conf
fresh scripts/compton-toggle --bin

# dwm: dynamic window manager
fresh scripts/dwmstatus --bin

# dunst: simple notification daemon
fresh config/dunstrc --file=~/.config/dunst/dunstrc

# dmenu: simple 'graphical' menu
fresh scripts/dmenu_run.pl --bin

# evrouter: input event daemon
fresh config/evrouterrc --file
fresh scripts/evroutercleanup --bin

# gtk: widget toolkit
fresh config/gtk/settings.ini --file=~/.config/gtk-3.0/settings.ini
fresh config/gtk/gtkrc-2.0 --file

# i3: tiling/tabbed window manger
fresh config/i3/config --file=~/.config/i3/config
fresh scripts/lockx --bin

# polybar: fast/easy status bar
fresh config/polybar/config --file=~/.config/polybar/config

# redshift: screen tinter
fresh config/redshift.conf --file=~/.config/redshift.conf

# xbindkeys: global keyboard bindings
fresh config/xbindkeysrc --file

# x11: the x display server
fresh config/x11/xprofile --file
fresh config/x11/xsession --file
fresh config/x11/xinitrc --file
fresh config/x11/xserverrc --file

# xmodmap: x keysym configuration
fresh config/x11/Xmodmap --file

# xrdb: x resources database
fresh config/x11/Xresources --file

#
# Audio
#

# alsa: advanced linux sound architecture
fresh config/asoundrc --file

# mpd: music player daemon
fresh config/mpd.conf --file=~/.mpd/mpd.conf

# ncmpcpp: mpd client
fresh config/ncmpcpp/config --file=~/.ncmpcpp/config
fresh config/ncmpcpp/bindings --file=~/.ncmpcpp/bindings

#
# Utilities
#

# 24bit: check a terminal for true color support
fresh scripts/24bit --bin

# aur: the arch user repository
fresh scripts/aurdiff --bin
fresh scripts/aurget --bin

# git: the stupid content tracker
fresh-options --file=~/.config/git/config --marker
    fresh config/git/config
    fresh config/git/aliases
    fresh config/git/colors
fresh-options
fresh config/git/attributes --file=~/.config/git/attributes
fresh config/git/ignore --file=~/.config/git/ignore
fresh config/git/template --file=~/.config/git/template/

# gnupg: the gnu privacy guard
fresh scripts/pinentry --bin
fresh config/gnupg/gpg.conf --file=~/.gnupg/gpg.conf
fresh config/gnupg/gpg-agent.conf --filter="sed s#HOME#$HOME#" --file=~/.gnupg/gpg-agent.conf
fresh config/gnupg/dirmngr.conf --file=~/.gnupg/dirmngr.conf
fresh config/gnupg/sks-keyservers.netCA.pem --file=~/.gnupg/sks-keyservers.netCA.pem

# htop: interactive process monitor
fresh config/htoprc --file=~/.config/htop/htoprc

# makepkg: arch linux packager
fresh config/makepkg.conf --file

# pyenv: python version manager
fresh scripts/pyenv-install --bin

# rbenv: ruby version manager
fresh scripts/rbenv-install --bin

# tmux: terminal multiplexer
fresh-options --file=~/.tmux.conf --marker
    fresh config/tmux/main.conf
    fresh config/tmux/statusline.conf
    if [[ "$(uname)" == "Darwin" ]]; then
        fresh config/tmux/osx.conf
    elif [[ "$(uname)" == "Linux" ]]; then
        fresh config/tmux/linux.conf
    fi
fresh-options

fresh_after_build () {
    chmod +x ~/.fresh/build/xsession

    for unit in ~/.fresh/build/systemd/*; do
        ln -sf $unit ~/.config/systemd/user/$(basename $unit)
    done
}

# vi:ft=sh:
