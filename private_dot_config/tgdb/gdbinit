shell sh -c 'git -C ${XDG_DATA_HOME:-$HOME/.local/share}/gdb-dashboard pull -q'

python
import os
HOME = os.path.expanduser("~")
XDG_DATA_HOME = os.environ['XDG_DATA_HOME'] \
                    if os.environ['XDG_DATA_HOME'] \
                    else os.path.join(HOME, ".local", "share")

# load history file
gdb.execute(f"set history filename {XDG_DATA_HOME}/gdb/history")
# load dashboard
gdb.execute(f"source {XDG_DATA_HOME}/gdb-dashboard/.gdbinit")
end

# custom layout
dashboard -layout assembly source registers memory threads stack variables expressions breakpoints history

# make variables readable
dashboard variables -style align True
dashboard variables -style compact False
dashboard variables -style sort True

# align expressions
dashboard expressions -style align True

# sort the stack
dashboard stack -style sort True

# show registers by column
dashboard registers -style column-major True

# use full height
dashboard assembly -style height 0
dashboard source -style height 0

# use shell-builtin syntax highlighting
dashboard -style syntax_highlighting 'native'

# commands to toggle inline/expanded display of values
define expand
    dashboard -style compact_values False
end
define pack
    dashboard -style compact_values True
end
# ...and default to expanded values
expand

# turn off confirmation
set confirm off

# allow pending breakpoints
set breakpoint pending on

# use intel disassembly
set disassembly-flavor intel

# make sure we're pretty printing
set print pretty on
