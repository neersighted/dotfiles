#
# User Details
#

[user]
	name = Bjorn Neergaard
	email = bjorn@neersighted.com
	signingKey = 0x08AAA409549C0EC5
[credential]
	username = neersighted
	helper = manager 2>/dev/null
	helper = netrc -f ${XDG_DATA_HOME:-$HOME/.local/share}/git-credentials.gpg
	helper = cache --timeout=3600

#
# General Config
#

[status]
	short = true
	branch = true
	showStash = true
	submoduleSummary = true
[format]
	pretty = %C(yellow)%h%C(magenta)% G? %C(blue)%<(12,trunc)%ar %C(green)%<(16,trunc)%aN %C(reset)%s%C(red)%d
[pager]
	branch = less --quit-if-one-screen --no-init
	diff = diff-so-fancy | less --quit-if-one-screen --no-init
	show = diff-so-fancy | less --quit-if-one-screen --no-init

[diff]
	tool = nvr
	algorithm = patience
[merge]
	tool = nvr
[rebase]
	stat = true
	autoSquash = true
[sequence]
	editor = interactive-rebase-tool

#
# Servers
#

[url "git@github.com:"]
	pushInsteadOf = https://github.com/
	pushInsteadOf = git://github.com/

#
# Tools
#

[difftool "nvr"]
	cmd = nvr -s -d $LOCAL $REMOTE
[mergetool "nvr"]
	cmd = nvr -s -d $LOCAL $BASE $REMOTE $MERGED -c 'wincmd J | wincmd ='

[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true

#
# Aliases
#

[alias]
	# interactively select commits
	sel = "!f() { git log --oneline --color | git sel-fzf $1; }; f"
	rsel = "!f() { git log -g --oneline --color |  git sel-fzf $1; }; f"
	sel-ref = "!f() { git show-ref --abbrev |  git sel-fzf $1; }; f"
	sel-fzf = "!f() { fzf-tmux --ansi --preview='git sel-pre {}' -q \"$1\" | cut -d' ' -f1; }; f"
	sel-pre = "!f() { git show --stat --color $(echo $1 | cut -d ' ' -f1); }; f "
	# quick and easy autosquash commits
	squash = "!f() { git commit --squash=$(git sel $1); }; f"
	fixup = "!f() { git commit --fixup=$(git sel $1); }; f"
	# legit
	switch = !legit switch
	sync = !legit sync
	publish = !legit publish
	unpublish = !legit unpublish
	undo = !legit undo
	branches = !legit branches

#
# Colors
#

[color "diff"]
	whitespace = red reverse
	new = green
	old = red
	frag = yellow
	meta = magenta
	commit = cyan
