#!/bin/sh

set -e

# shellcheck source=lib.sh
. "{{ .chezmoi.sourceDir }}/dot_local/zbootstrap/lib.sh"

section "ngrok"

if ! command -v ngrok >/dev/null; then
  goversion=$(go version | awk '{print $4}')
  GOOS=${goversion%/*}
  GOARCH=${goversion#*/}

  important "Bootstrapping ngrok..."
  curl "https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-$GOOS-$GOARCH.zip" | funzip >"$HOME/.local/bin/ngrok"
  chmod +x "$HOME/.local/bin/ngrok"
  ngrok update
else
  important "Self-updating ngrok..."
  ngrok update
fi

# vi: ft=sh
